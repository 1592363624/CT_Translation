name: Trigger Empty Repo Pack

# 触发条件：当本仓库有代码 push 到 main 分支时（可修改分支）
on:
  push:
    branches: [ main ]

jobs:
  trigger-pack:
    runs-on: ubuntu-latest
    steps:
      - name: Send Repository Dispatch to Pack Repo
        uses: peter-evans/repository-dispatch@v3
        with:
          # 你的 GitHub 用户名/空仓库名（比如：your-name/private-repo-packer）
          repository: 1592363624/App-Center
          # 空仓库的 PAT（需和空仓库 Secrets 里的一致，或单独存到本仓库 Secrets）
          token: ${{ secrets.PRIVATE_REPO_TOKEN }}
          # 事件类型（必须和空仓库工作流里的 types 一致：pack_trigger）
          event-type: pack_trigger
          # 传递的参数：本仓库名、分支名、你的用户名（供空仓库拉取代码用）
          client-payload: |
            {
              "repo_name": "${{ github.event.repository.name }}",
              "repo_branch": "${{ github.ref_name }}",
              "github_user": "${{ github.repository_owner }}"
            }
